if(!!window.BMSiteNavigation===false){window.BMSiteNavigation={};}(function(a){a(function(){if(window.BMSiteNavigation.loaded===true){return;}function c(d){return typeof d==="string"||d instanceof String;}function b(d){return d!==null&&typeof d==="object";}if(a(".bm-welcome-page").length>0){a("body").removeClass("bm-welcome-page").addClass("bm-welcome-page");
}setTimeout(function(){if(!!BMSiteNavigation.menuURLStart===false){return;}var f=a("select[name=SelectedSiteID]").val()||a("#bm-selected-site-link-label").length>0;if(f){a(".goto-storefront").click(function(){window.open(BMSiteNavigation.bmMenuStorefrontURL);return false;});}else{a(".goto-storefront").click(function(){window.location=BMSiteNavigation.bmMenuSiteSelectionURL;
});a(".chevron-site-selection").click(function(){window.location=BMSiteNavigation.bmMenuSiteSelectionURL;});}var j=0;var i=1;var g=[];g[j]={name:"merchants",menuStartNode:"CreateSiteNavigationBarBM",parentKey:".menu.bm-dropdown-menu.merchant-tools",menuKey:".merchant-tool-menu",orderedColumns:{"site-obj":0,"customers":0,"seo":0,"prod-cat":1,"search":2,"marketing":3,"content":0,"orders":1,"analytics":3,"site-prefs":4,"custom":2}};
g[i]={name:"administrators",menuStartNode:"CreateAdminNavigationBarBM",parentKey:".menu.bm-dropdown-menu.admin",menuKey:".administration-menu",orderedColumns:{"global-replication":0,"organization":0,"sites":1,"studio":2,"global-prefs":3,"operations":4,"custom":1}};function e(o){var r=a(o).width();var q=400;
try{q=a(o).parent().position().left+a(o).parent().outerWidth();}catch(p){}if(r<q){a(o).css({"left":"auto","margin-left":"-20px"});}}function d(q){var r=a(window).height();var p=a(window).width();var s=a(q).width();var o=a(q).height();if(s>p){a(q).css("width",p-20);}if(o>r){a(q).css("height",r-20);}}function l(o){this.message=o;
this.name="LoadMenuException";}function k(o){var q=400;try{q=a(o).parent().position().left+a(o).parent().outerWidth();}catch(p){}if(a(o).outerWidth()<q){a(o).css({"left":"auto","margin-left":"-20px"});}else{a(o).css({"left":"0","margin-left":"0"});}}function m(o){a(".bm-menu-search-bar",o).show();setTimeout(function(){a(o).css("width",a(o).outerWidth());
},500);a(".bm-menu-search",o).keyup(function(s){var r=a(this).val();if(r.length>0){var u=r.toLowerCase().split(" ");a(".overview_item_bm",o).hide();a(".section-name, .bm-menu-column",o).hide();a(".bm-menu-head",o).hide();var q=0;var t=undefined;a.each(a(".overview_item_bm",o),function(w,x){var v=a(x).text().toLowerCase();
if(0==q){t=a(x);}var z=0;var y=true;u.forEach(function(A){var B=v.indexOf(A,z);if(-1==B){y=false;return;}z=B+1;});if(y){a(x).show();a(x).parents(".section-name, .bm-menu-column").show();a(x).parents(".section-name").find(".bm-menu-head").show();q++;}else{a(x).hide();}});if(q==1&&s.which==13){var p=t.find("a").attr("href");
if(p!=undefined){window.location.replace(p);}}}else{a(".section-name, .bm-menu-column",o).show();a(".bm-menu-head",o).show();a(".section-name .overview_item_bm",o).show();}});}function n(o){setTimeout(function(){if(a(o).hasClass("show-menu")&&a(o).find(".the-menu").is(":visible")){var p=a(o).find(".the-menu input").outerHeight();
a(o).find(".the-menu input").css("height",0);a(o).find(".the-menu input").focus();a(o).find(".the-menu input").css("height",p);}},250);}var h=function(p){if(!c(p.name)){throw"Error: menu configuration option missing string property 'name'.";}if(!c(p.menuStartNode)){throw"Error: menu configuration option missing string property 'menuStartNode'.";
}if(!c(p.menuKey)){throw"Error: menu configuration option missing string property 'menuKey'.";}if(!b(p.orderedColumns)){throw"Error: menu configuration option missing object property 'orderedColumns'.";}var o=a(".bm-site-navigation-menus").find(p.menuKey);a(o).click(function(){localStorage&&localStorage.setItem("bm-site-nav-last-menu-section",p.menuKey);
});if(localStorage&&localStorage.getItem("bm-site-nav-last-menu-section")===p.menuKey){a(o).parent().closest("li").addClass("slds-is-active");a(o).parent(".menu").addClass("active");}a.ajax({url:BMSiteNavigation.menuURLStart.replace("___StartNode___",p.menuStartNode),dataType:"html",contentType:"text/html,application/xhtml+xml,application/xml",success:function(r){window.BMSiteNavigation.loaded=true;
var q=p.orderedColumns;a.each(a(".section-name",r),function(s,v){var t=a(v).attr("section-name");var u;if(typeof q[t]==="undefined"){u=a(".bm-menu-column:eq("+q["custom"]+")",o).show();}else{u=a(".bm-menu-column:eq("+q[t]+")",o).show();}a(".section-name."+t,r).appendTo(u,o);});if(window.BMCSRFInjector!=null){window.BMCSRFInjector.injectInDoc(o[0]);
}e(o);d(o);m(o);},error:function(q){throw new l("Error retrieving menu for "+(p.name||"unknown"));}});};if(a(".bm-welcome-page").length>0){localStorage&&localStorage.setItem("bm-site-nav-last-menu-section",null);}a("body").click(function(o){if(a(o.target).closest(".show-menu").length===0){a(".bm-dropdown-menu").removeClass("show-menu");
}});a("body").keyup(function(o){if(o.which===27){a(".bm-dropdown-menu").removeClass("show-menu");}});a(".the-menu").click(function(o){if((o.ctrlKey||o.metaKey||o.shiftKey||o.altKey||(o.button!==1))&&a(o.target).is("a")){o.stopPropagation();return true;}if(a(o.target).hasClass("bm-menu-search")||a(o.target).hasClass("the-menu")||a(o.target).parents(".the-menu").length){o.stopPropagation();
return false;}});a(".menu.merchant-tools .menu-overview-link-icon").click(function(q){a(".bm-dropdown-menu.admin.show-menu").removeClass("show-menu");if(f){var p=q.currentTarget;var o=a(p).parents(".bm-dropdown-menu").first();a(o).toggleClass("show-menu");d(a(".the-menu",o));n(o);q.preventDefault();}});
a(".menu.admin .nav-tab-link").click(function(o){localStorage&&localStorage.setItem("bm-site-nav-last-menu-section",".administration-menu");});a(".menu.merchant-tools .nav-tab-link").click(function(o){localStorage&&localStorage.setItem("bm-site-nav-last-menu-section",".merchant-tool-menu");});a(".menu.admin .menu-overview-link-icon").click(function(q){a(".bm-dropdown-menu.merchant-tools.show-menu").removeClass("show-menu");
var p=q.currentTarget;var o=a(p).parents(".bm-dropdown-menu").first();a(o).toggleClass("show-menu");d(a(".the-menu",o));n(o);q.preventDefault();});if(f){h(g[j]);}h(g[i]);},50);});})(jQuery);